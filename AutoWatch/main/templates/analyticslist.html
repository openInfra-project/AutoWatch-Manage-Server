<!DOCTYPE html>
<html lang="ko" id="html">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoWatch</title>
    <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="/static/assets/css/fontawesome.css">
    <link rel="stylesheet" href="/static/assets/css/templatemo-seo-dream.css?after">
    <link rel="stylesheet" href="/static/assets/css/main.css">
    <link rel="stylesheet" href="/static/assets/css/makeroom.css">
    <link rel="stylesheet" href="/static/assets/css/enterroom.css?after">
    <link rel="stylesheet" href="/static/assets/css/list.css?after?after">
    <link rel="stylesheet" href="/static/assets/css/animated.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="/static/assets/css/owl.css">
    <script type="text/javascript" src="//cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script type="text/javascript" src="//cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>
</head>
<body>
    <!-- ***** Header Area Start ***** -->
    <div class="animate__animated animate__fadeInDown animate__delay-0.8s">
      <header class="header-area">
        <div class="container">
          <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                  <!-- ***** Logo Start ***** -->
                  <a href="/main" class="logo">
                    <h4>Auto Watch <img src="/static/assets/images/자동감시로고_-removebg-preview.png" alt="" class="auto_logo"></h4>
                  </a>
                  <!-- ***** Logo End ***** -->
                  <!-- ***** Menu Start ***** -->
                  <ul class="nav">
                    <li class="scroll-to-section"><a href="/main">Home</a></li>
                    <li class="scroll-to-section"><a href="/main/list">My List</a></li>
                    <li class="scroll-to-section"><a href="/logout">Logout</a></li>
                    <li class="scroll-to-section"></li>
                  </ul>
                  <a class='menu-trigger'>
                      <span>Menu</span>
                  </a>
                  <!-- ***** Menu End ***** -->
                </nav>
            </div>
          </div>
        </div>
      </header>
    </div>
    <!-- ***** Header Area End ***** -->
    <div class="main">
      <div class="inner">
        <div class="list-wapper" id="list-wapper" name="list-wapper" >
            <div class="analytics" id="analytics" name="analytics">
                <h3>{{ chartTitle|safe }}</h3>
                <div id="chart-1">{{ output|safe }}</div>
                <div id="chart-2">{{ output_2|safe }}</div>
            </div>
            <button onclick="partShot()">저장하기</button>
            <button onclick="toView()">닫기</button>
        </div>
    
      </div> 
    </div>

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <script>
        function partShot() {
            //특정부분 스크린샷
            let image = html2canvas(document.getElementById('analytics'))
            image.then(function(canvas){
                let data = canvas.toDataURL('/list/image');
                console.log(data)

                $.ajax({
                    type: 'POST',
                    url: '/main/saveImages',   // 현재 이 html파일의 경로가 기본 경로로 더해짐 지금은 /main/list/saveImage/
                    data: {data:data},
                    success: function(result){
                        let filename = result['filename'];
                        sendLinkakao(filename);
                    },
                    error: function(e) {alert("에러발생")}
                });

            });
           
        }
        



        function saveAs(uri, filename) {
            var link = document.createElement('a');
            if (typeof link.download === 'string') {
            link.href = uri;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            } else {
            window.open(uri);
            }
        }

    </script>
</body>
</html>